预处理器
一切皆模块的思想与loader的概念、原理、引入loader、常用loader介绍、编写loader
每个loader本质上都是一个函数
webpack4之后，loader同时支持抽象语法树AST的传递，通过这种方法来减少重复的代码解析。
output = loader(input)
input可能是工程源文件的字符串，也可能是一个loader转化后的结果，包括转化后的结构(也是字符串类型)，source map，以及AST对象。
output同样包括这几种信息，传化后的文件字符串，source map，以及AST。
ES5 = babel-loader(ES6)
ouput = loaderA(loaderB(loaderC(input)))
style = style-loader(css-loader(sass-loader(SCSS)))

loader源码结构
module.exports = function loader (content, map, meta) {
    var callback = this.async();
    var result = handler(content, map, meta);
    callback(
        null,                   // error
        result.content,         // 转换后的内容
        result.map,             // 转换后的source-map
        result.meta,            // 转换后的AST
    )
}

loader的配置
npm install style-loader
npm install css-loader
module.exports = {
    // ...
    module: {
        rules: [{
            test: /\.css$/,             // 接收一个正则表达式或者一个元素为正则表达式的数组
            use: [                      // 可接收一个数组，数组包含该规则所使用的loader，从后往前链式处理
                'style-loader',
                {
                    loader: 'css-loader',
                    options: {
                        // css-loader 配置项
                    }
                }
            ],
            exclude: /node_modules/,        // 排除指定目录下的模块，exclude优先级大于include
            include: /src/,                 // 包含指定目录下的模块
            resource: {                     // 被加载模块是resource
                test: /\.css$/,
                include: /node_modules/,
            },
            issuer: {                       // 加载者是issuer
                test: /\.js$/,
                include: /src/pages/,
            }
        }, {
            test: /\.js$/,
            enforce: "pre",                 // pre代表在所有loader之前执行，如果在所有loader之后执行则指定为post
            use: "eslint-loader"
        }]
    }
}

常用loader

