# 边缘渲染

SSR => CSR => SSR => ESR

## SSR(Server Side Rendering)

JSP、PHP

## CSR(Client Side Rendering)

前端SPA+CSR渲染，前后端分工

## SSR(Node)

前后端全是JS语法，代码可复用，SEO场景友好，服务端渲染好后直接返回最终的HTML，减少了白屏等待时间，过多异步请求的导致的性能问题也可下放到服务端解决，也能有效避免多次的数据获取、内容填充，浏览器只绑定相关的JS逻辑、事件即可。

## ESR(Edge Side Rendering)

CDN节点距离用户更近，有更短网络延时的优势，我们可以将页面进行动静拆分，将静态内容缓存在CDN先快速返回给用户，然后在CDN节点上发起动态内容的请求，之后将动态内容与静态部分以流的形式进行拼接，从而进一步提高了用户的首屏加载时间，尤其在边远地区或者弱网环境也能拥有很好的用户体验，此外还减少原先SSR服务器压力。

## 原理与优势

- Time To First Byte很短
- First Paint很短
- First Meaningful Paint很短

## 应用场景举例

- 将SSR服务直接部署在边缘节点，中心服务提供数据接口
- 边缘服务读取缓存的静态部分HTML，中心服务提供动态HTML

## 总结

- 技术实现：  ESR适应于对页面渲染性能较高的场景，借助边缘计算在SSR的基础上进一步优化首屏绘制的时间，降低用户页面的白屏等待时间；
- 部署方式：  目前实现方式主要借助于边缘faas部署ESR服务，具有快速访问、弹性扩缩容、低运维成本等优点；后期提供ER（边缘js运行时）部署，用户无需关心边缘节点，只需专注于代码本身，修改代码上传发布即可，相对于node服务，js运行时能够提供更高的运行效率
- 技术展望：  ESR目前是在SSR基础上，结合边缘计算进行的性能提升，将来我们将结合ER与CDN能力，在Jamstack方向进行更多的探索，有兴趣的同学敬请期待
