## 站点体验

- LCP: Largest Contentful Paint 最大内容绘制，测量加载的性能
- FID: First Input Delay 第一次输入延迟，测量可交互性
- CLS: Cumulative Layout Shift 累计布局位移，测量视觉稳定性

## SDK采集

- RUM（Real User Monitoring）指标，包括FP，TTI，FCP，FMP，FID，MPFID
- Navigation Timing 各阶段指标，包括DNS，TCP，DOM解析等阶段的指标
- JS Error，解析后可以细分为运行时异常，以及静态资源异常
- 请求状态码，采集上报后，可以分析请求异常等信息

RUM指标采集，主要依赖Event Timing API
```js
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    const FID = entry.processingStart - entry.startTime;
    console.log('FID:', FID)
  }
});
observer.observe({
  type: "first-input",
  buffered: true
});
```

Navigation Timing 指标，可以通过 PerformanceTiming 接口得到
```js
function onLoad() {
  var now = new Date().getTime();
  var page_load_time = now - performance.timing.navigationStart;
  console.log("User-perceived page loading time: " + page_load_time);
}
```

JS Error 指标，通过window.onerror回调函数
```js
window.onerror = function (message, source, lineno, colno, error) {
  // 构造异常数据格式并上报
};
```

通过 unhandledrejection 事件监听 Promise rejections 异步错误：
```js
window.addEventListener("unhandledrejection", (event) => {
  // 构造异常数据格式并上报
});
```

请求状态码，则可以通过覆写 window.fetch 和 XMLHttpRequest 对象来实现监听
